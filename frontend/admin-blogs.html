    <!DOCTYPE html>
    <html lang="vi">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Admin Dashboard - Blog Management</title>
        <script src="https://cdn.tailwindcss.com"></script>
    </head>
    <body class="bg-gray-50 min-h-screen flex">
        <!-- Sidebar -->
        <aside class="w-64 bg-blue-700 text-white p-6">
        <h2 class="text-2xl font-bold mb-8">Admin Panel</h2>
        <ul>
            <li class="mb-4">
            <a href="./admin.html" class="hover:underline">Dashboard</a>
            </li>
            <li class="mb-4">
            <a href="./admin-blogs.html" class="hover:underline">Blog Management</a>
            </li>
            <li class="mb-4">
            <a href="#" onclick="logout()" class="hover:underline">ƒêƒÉng xu·∫•t</a>
            </li>
        </ul>
        </aside>

        <!-- Main Content -->
        <div class="flex-1 p-6">
        <header class="mb-8">
            <h1 class="text-2xl font-semibold">Qu·∫£n l√Ω b√†i vi·∫øt</h1>
        </header>

        <!-- Blog List Section -->
        <section class="mb-12">
            <h2 class="text-xl font-semibold mb-4">Danh s√°ch b√†i vi·∫øt</h2>
            <div class="overflow-x-auto">
            <table class="min-w-full bg-white rounded shadow">
                <thead class="bg-green-100 text-left">
                <tr>
                    <th class="py-2 px-4">Ti√™u ƒë·ªÅ</th>
                    <th class="py-2 px-4">Th·ªùi gian</th>
                    <th class="py-2 px-4 text-center">H√†nh ƒë·ªông</th>
                </tr>
                </thead>
                <tbody id="blogList" class="text-sm text-gray-700"></tbody>
            </table>
            </div>
        </section>

        <!-- Add New Blog Post Section -->
        <section>
            <h2 class="text-xl font-semibold mb-4">Th√™m b√†i vi·∫øt m·ªõi</h2>
            <form id="addBlogForm" class="space-y-4">
            <a href="./blogFrom.html" class="bg-blue-700 text-white px-4 py-2 rounded">
                Th√™m b√†i vi·∫øt
            </a>
            </form>
        </section>
        </div>

        <script>
        if (!localStorage.getItem("admin_token")) {
            alert("B·∫°n c·∫ßn ƒëƒÉng nh·∫≠p ƒë·ªÉ truy c·∫≠p!");
            window.location.href = "admin-login.html";
        }

        function logout() {
            localStorage.removeItem("admin_token");
            window.location.href = "admin-login.html";
        }

        document.addEventListener("DOMContentLoaded", () => {
            const blogList = document.getElementById("blogList");
            loadBlogList();

            // Form submit handler
            const addBlogForm = document.getElementById("addBlogForm");
            addBlogForm.addEventListener("submit", async (event) => {
            event.preventDefault();
            const title = document.getElementById("title").value;
            const content = document.getElementById("content").value;
            
            await addNewBlog(title, content);
            });
        });

        // Load list of blogs
        function loadBlogList() {
            fetch("/api/blog")
            .then((res) => res.json())
            .then((data) => {
                const blogList = document.getElementById("blogList");
                blogList.innerHTML = data.data
                .map(
                    (blog) =>
                    `<tr>
                        <td class="py-2 px-4">${blog.title}</td>
                        <td class="py-2 px-4">${formatDate(blog.createdAt)}</td>
                        <td class="py-2 px-4 text-center">
                        <button onclick="deleteBlog('${blog._id}')" class="text-red-600 hover:underline text-sm">üóë Xo√°</button>
                        </td>
                    </tr>`
                )
                .join("");
            })
            .catch(() => {
                alert("L·ªói khi t·∫£i danh s√°ch b√†i vi·∫øt");
            });
        }

        // Add new blog post
        async function addNewBlog(title, content) {
            try {
            const res = await fetch("/api/blog", {
                method: "POST",
                headers: {
                "Content-Type": "application/json",
                },
                body: JSON.stringify({ title, content }),
            });
            
            const data = await res.json();
            if (data.success) {
                alert("Th√™m b√†i vi·∫øt th√†nh c√¥ng!");
                loadBlogList(); // Reload the blog list
            } else {
                alert("L·ªói khi th√™m b√†i vi·∫øt");
            }
            } catch (error) {
            alert("L·ªói k·∫øt n·ªëi khi th√™m b√†i vi·∫øt");
            }
        }

        // Delete a blog post
        async function deleteBlog(id) {
            if (!confirm("B·∫°n c√≥ ch·∫Øc mu·ªën xo√° b√†i vi·∫øt n√†y?")) return;

            try {
            const res = await fetch(`/api/blog/${id}`, {
                method: "DELETE",
            });
            const data = await res.json();
            if (data.success) {
                alert("ƒê√£ xo√° b√†i vi·∫øt th√†nh c√¥ng");
                loadBlogList(); // Reload the blog list
            } else {
                alert("Xo√° th·∫•t b·∫°i");
            }
            } catch (error) {
            alert("L·ªói khi xo√° b√†i vi·∫øt");
            }
        }

        function formatDate(dateStr) {
            if (!dateStr) return "";
            return new Date(dateStr).toLocaleString("vi-VN");
        }
        </script>
    </body>
    </html>
